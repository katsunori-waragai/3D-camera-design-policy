# reducing latency and camera pose
3Dカメラでの画像認識処理には、どうしても遅延が生じてしまう。

# 遅延時間の問題
## アプローチ１：　遅延時間の削減

## アプローチ２：　現時刻での予測

# 世界座標系での問題
上記の問題に対して、ロボットではカメラ姿勢の問題を生じてしまう。
自分の首の姿勢が変わったときに、やってくる車の動きを世界座標系で適切に判断する。
遅延時間を含んでいるので、現時刻での位置は、過去フレームのデータを含めた予測になる。
## 遅延時間の補正分の予測
このため遅延時間の分の補正を加えて、世界座標での位置を算出する。
この遅延時間の補正分の予測の予測器が、適切であるのかは、ユースケースの中で検証されなくてはならない。

# 他者の動き予測
例：渋谷のスクランブル交差点を渡ることを考える。
他の歩行者とぶつからないように歩く。
そこでは、他の歩行者の過去フレームを含めた世界座標系での動きを、ごく近い人に対して追跡している。
数秒先の瞬間も含めてぶつからないようにするためには、他者の動き予測を実施しなければならない。

これらの中で、遅延時間を含めた、他者の動き予測モデル・そこでの自らの行動モデルとを最適化することで、
他者にぶつからないように歩くことができるだろう。

## 遅延時間を減らすための方策
- 3D計測や画像認識処理への入力の画像サイズを小さくする。
- データのパイプライン設計を改善する。
  - CPU、GPU間のデータ転送を減らす。
- モジュールの改善
  - メモリのコピーを減らす。
- アクセラレータを使ってCPUの負荷を減らす。
- シングルスレッドによるIOでの待ち時間を減らすために、マルチスレッドにして、IOの部分とデータ処理とを別スレッドにする。
- 別々の検出器を複数動かすのではなく、１つの検出器で兼用させる。
  - 例：物体検出とインスタンスセグメンテーションとを同時に実行するライブラリの利用
- encode/decode 処理を減らす。バイナリデータのテキスト化を不要にする。
- 圧縮・展開処理をしない。
- 圧縮・展開処理が必要なときは、利用可能なハードウェアアクセラレータを使う。
- 動き差分を生じないときには、検出処理をスキップする。
- その他、意図しない遅延の原因を取り除く。
- バファファリング処理の改善



